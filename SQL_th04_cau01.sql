CREATE DATABASE BAITAP5
GO
SET DATEFORMAT 'DMY'
GO
USE BAITAP5
GO
--TAO CÁC BẢNG
CREATE TABLE LOAISP(
	MaLoai char(3) primary key,
	TenLoai nvarchar(25)not null
	--CONSTRAINT KC_LOAISP PRIMARY KEY(MaLoai)
);
CREATE TABLE SANPHAM(
	MaSP char(4),
	TenSP nvarchar(50)not null,
	MoTa nvarchar(55),
	Gia float,
	MaLoai char(3),
	CONSTRAINT KC_SANPHAM PRIMARY KEY(MaSP)
);
CREATE TABLE KHACHHANG(
	MaKH char(5)primary key,
	TenKH nvarchar(30)not null,
	DiaChi nvarchar(100),
	DienThoai varchar(20),
);

CREATE TABLE DonDH(
	SoDDH char(5) primary key,
	NgayDat SmallDateTime not null,
	MaKH char(5) references KHACHHANG(MaKH),
);
CREATE TABLE ChiTietDDH(
	SoDDH char(5) references DonDH(SoDDH),
	MaSP char(4) references SANPHAM(MaSP),
	SoLuong int not null,
	Primary key (SoDDH, MaSP)
);
CREATE TABLE NguyenLieu(
	MaNL char(4) primary key,
	TenNL nvarchar(25)not null,
	DVT char (3),
	Gia decimal(9,2)check (Gia>0)

);
CREATE TABLE Lam(
	MaNL char(4) references NguyenLieu(MaNL),
	MaSP char(4) references SANPHAM(MaSP),
	SoLuong decimal(9,2)default 0,
	primary key(MaNL,MaSP)
);

--NHAP DU LIEU
INSERT INTO LOAISP
	VALUES('L01',N'Tủ');
INSERT INTO LOAISP
	VALUES('L02',N'Bàn');
INSERT INTO LOAISP
	VALUES('L03',N'Giường');




INSERT INTO SANPHAM
	VALUES('SP01',N'Tủ trang điểm',N'Cao 1.4m, rộng 2.2m',1000000,'L01');
INSERT INTO SANPHAM
	VALUES('SP02',N'Giường đơn Cali',N'Rộng 1.4m',1500000,'L03');
INSERT INTO SANPHAM
	VALUES('SP03',N'Tủ DDA',N'Cao 1.6m, rộng 2.0m, cửa kiếng',800000,'L01');
INSERT INTO SANPHAM
	VALUES('SP04',N'Bàn nhậu','1m x 1.5m',650000,'L02');
INSERT INTO SANPHAM
	VALUES('SP05',N'Bàn uống trà',N'Tròn, 1.8m',1100000,'L02');


INSERT INTO KHACHHANG
	VALUES('KH001','TRAN HAI CUONG','731 TRAN HUNG DAO Q1 TPHCM ','089776655');
INSERT INTO KHACHHANG
	VALUES('KH002','NGUYEN THI BE','638 NGUYEN VAN CU Q5 TPHCM','0913666123');
INSERT INTO KHACHHANG
	VALUES('KH003','TRAN THI MINH HOA','543 MAI THI LUU BA DINH HA NOI','049238777');
INSERT INTO KHACHHANG
	VALUES('KH004','PHAM DINH TUAN','975 LE LAI P3 VUNG TAU','064543678');
INSERT INTO KHACHHANG
	VALUES('KH005','LE XUAN NGUYEN','450 TRUONG VUONG MY THO TG','073987123');
INSERT INTO KHACHHANG
	VALUES('KH006','VAN HUNG DUNG','291 HO VAN HUE Q.PN TPHCM','088222111');
INSERT INTO KHACHHANG
	VALUES('KH012','LE THI HUONG HOA','980 LE HONG PHONG VUNG TAU','064452100');
INSERT INTO KHACHHANG
	VALUES('KH016','HA MINH TRI','332 NGUYEN THAI HOC QUY NHON','056565656');

INSERT INTO DonDH
	VALUES('DH001','15/03/2004','KH001');
INSERT INTO DonDH
	VALUES('DH002','15/03/2004','KH016');
INSERT INTO DonDH
	VALUES('DH003','16/03/2004','KH003');
INSERT INTO DonDH
	VALUES('DH004','16/03/2004','KH012');
INSERT INTO DonDH
	VALUES('DH005','17/03/2004','KH001');
INSERT INTO DonDH
	VALUES('DH006','1/04/2004','KH002');

INSERT INTO ChiTietDDH
	VALUES('DH001','SP01',5);
INSERT INTO ChiTietDDH
	VALUES('DH001','SP03',1);
INSERT INTO ChiTietDDH
	VALUES('DH002','SP02',2);
INSERT INTO ChiTietDDH
	VALUES('DH003','SP01',2);
INSERT INTO ChiTietDDH
	VALUES('DH003','SP04',10);
INSERT INTO ChiTietDDH
	VALUES('DH004','SP02',2);
INSERT INTO ChiTietDDH
	VALUES('DH004','SP05',2);
INSERT INTO ChiTietDDH
	VALUES('DH005','SP03',3);
INSERT INTO ChiTietDDH
	VALUES('DH006','SP02',4);
INSERT INTO ChiTietDDH
	VALUES('DH006','SP04',3);
INSERT INTO ChiTietDDH
	VALUES('DH006','SP05',6);

INSERT INTO NguyenLieu
	VALUES('NL01',N'Gỗ lim XP','m3',1200000);
INSERT INTO NguyenLieu
	VALUES('NL02',N'Gỗ sao NT','m3',1000000);
INSERT INTO NguyenLieu
	VALUES('NL03',N'Gỗ tạp','m3',500000);
INSERT INTO NguyenLieu
	VALUES('NL04',N'Đinh lớn','kg',40000);
INSERT INTO NguyenLieu
	VALUES('NL05',N'đinh nhỏ','kg',30000);
INSERT INTO NguyenLieu
	VALUES('NL06',N'Kiếng','m2',350000);

INSERT INTO Lam
	VALUES('NL01','SP01',1.2);
INSERT INTO Lam
	VALUES('NL03','SP01',0.3);
INSERT INTO Lam
	VALUES('NL06','SP01',2.5);
INSERT INTO Lam
	VALUES('NL02','SP02',1.1);
INSERT INTO Lam
	VALUES('NL04','SP02',2.2);
INSERT INTO Lam
	VALUES('NL02','SP03',0.9);
INSERT INTO Lam
	VALUES('NL05','SP03',2.1);
INSERT INTO Lam
	VALUES('NL02','SP04',1.3);
INSERT INTO Lam
	VALUES('NL04','SP04',1.7);
INSERT INTO Lam
	VALUES('NL03','SP05',0.8);
INSERT INTO Lam
	VALUES('NL05','SP05',0.5);
INSERT INTO Lam
	VALUES('NL06','SP05',2.4);

